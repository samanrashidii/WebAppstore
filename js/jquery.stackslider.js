!function(u,i,t){"use strict";var r,a,o=u.event;r=o.special.debouncedresize={setup:function(){u(this).on("resize",r.handler)},teardown:function(){u(this).off("resize",r.handler)},handler:function(t,i){var s=this,e=arguments,n=function(){t.type="debouncedresize",o.dispatch.apply(s,e)};a&&clearTimeout(a),i?n():a=setTimeout(n,r.threshold)},threshold:150};var f="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";u.fn.imagesLoaded=function(s){var e=this,n=u.isFunction(u.Deferred)?u.Deferred():0,r=u.isFunction(n.notify),a=e.find("img").add(e.filter("img")),o=[],h=[],l=[];function c(){var t=u(h),i=u(l);n&&(l.length?n.reject(a,t,i):n.resolve(a)),u.isFunction(s)&&s.call(e,a,t,i)}function d(t,i){t.src!==f&&-1===u.inArray(t,o)&&(o.push(t),i?l.push(t):h.push(t),u.data(t,"imagesLoaded",{isBroken:i,src:t.src}),r&&n.notifyWith(u(t),[i,a,u(h),u(l)]),a.length===o.length&&(setTimeout(c),a.unbind(".imagesLoaded")))}return u.isPlainObject(s)&&u.each(s,function(t,i){"callback"===t?s=i:n&&n[t](i)}),a.length?a.bind("load.imagesLoaded error.imagesLoaded",function(t){d(t.target,"error"===t.type)}).each(function(t,i){var s=i.src,e=u.data(i,"imagesLoaded");e&&e.src===s?d(i,e.isBroken):i.complete&&void 0!==i.naturalWidth?d(i,0===i.naturalWidth||0===i.naturalHeight):(i.readyState||i.complete)&&(i.src=f,i.src=s)}):c(),n?n.promise(e):e};var s=u(i),e=(u(document),i.Modernizr);u.StackSlider=function(t,i){this.$stack=u(i).hide(),this._init(t)},u.StackSlider.defaults={speed:600,easing:"ease-in-out",piles:!0},u.StackSlider.prototype={_init:function(t){this.options=u.extend(!0,{},u.StackSlider.defaults,t),this.support=e.csstransitions&&e.csstransforms3d;this.support&&(this.transEndEventName={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[e.prefixed("transition")]+".stackslider",this.transformName={WebkitTransform:"-webkit-transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",transform:"transform"}[e.prefixed("transform")]),this.current=0;var i=this;this.$stack.imagesLoaded(function(){if(i._layout(),0===i.itemsCount)return!1;i._initEvents()})},_layout:function(){var t=this.$stack.children("li");this.itemsCount=t.length,this.$wrapper=u('<div class="st-wrapper"></div>'),this.options.piles&&(this.$lPile=u('<div class="st-stack st-stack-left"></div>'),this.$rPile=u('<div class="st-stack st-stack-right"></div>'),this.$wrapper.append(this.$lPile,this.$rPile)),this.$title=u('<div class="st-title"></div>').appendTo(this.$wrapper),1<this.itemsCount&&(this.$navigation=u("<nav><span>Previous</span><span>Next</span></nav>"),this.$wrapper.append(this.$navigation));var i="";t.each(function(){var t=u(this);i+='<div class="st-item">'+t.children("div.st-item").html()+"</div>"}),this.$listitems=u("<div></div>").html(i),this.$items=this.$listitems.children("div").hide(),this.$wrapper.insertAfter(this.$stack).prepend(this.$listitems),this.$stack.remove(),this.options.piles&&this.$rPile.css("height","+="+5*(this.itemsCount-1)),this._setSize(),this._initItems()},_setSize:function(){var t=1.25*this.$items.height();this.radius=this.$wrapper.width()/2-t/2,this.options.piles&&(this.$lPile.css("width",t),this.$rPile.css("width",t))},_initEvents:function(t){var i=this;this.$navigation.children("span:last").on({"mousedown.stackslider":function(){i._navigate("next"),i.startflowtimeout=setTimeout(function(){i.flow=!0,i._flow("next")},600)},"mouseup.stackslider mouseleave.stackslider":function(){i._mouseup("next")}}).end().children("span:first").on({"mousedown.stackslider":function(){i._navigate("prev"),i.startflowtimeout=setTimeout(function(){i.flow=!0,i._flow("prev")},600)},"mouseup.stackslider mouseleave.stackslider":function(){i._mouseup("prev")}}),s.on("debouncedresize.stackslider",function(){i._setSize(),i._initItems()})},_mouseup:function(t){var i=this;clearTimeout(this.startflowtimeout),clearTimeout(this.flowtimeout),this.flow&&(setTimeout(function(){0!==i.current&&i.current!==i.itemsCount-1&&i._navigate(t)},100),this.flow=!1)},_flow:function(t){var i=this;this._navigate(t,!0),this.flowtimeout=setTimeout(function(){i._flow(t)},150)},_navigate:function(t,i){var s,e,n,r,a=this,o="st-left st-center st-right st-leftflow st-rightflow",h=this.$items.eq(this.current);if("next"===t&&this.current<this.itemsCount-1)++this.current,e="st-left",s=i?"st-leftflow":e,n="right",r="left";else{if(!("prev"===t&&0<this.current))return!1;--this.current,e="st-right",s=i?"st-rightflow":e,n="left",r="right"}this._updatePile(n,"out");var l=this.$items.eq(this.current);h.removeClass(o).addClass(s),this.support?h.on(this.transEndEventName,function(){u(this).removeClass(o).addClass(e).off(a.transEndEventName),a._updatePile(r,"in")}):(h.removeClass(o).addClass(e),this._updatePile(r,"in")),l.show(),setTimeout(function(){(!i||0!==a.current&&a.current!==a.itemsCount-1)&&i||l.removeClass(o).addClass("st-center")},25),clearTimeout(this.titletimeout);var c=this.support?this.options.speed:0;this.titletimeout=setTimeout(function(){a.$title.html(l.data("title"))},c)},_updatePile:function(t,i){if(!this.options.piles)return!1;"right"===t?this.$rPile.css("height","in"===i?"+=5":"-=5"):"left"===t&&this.$lPile.css("height","in"===i?"+=5":"-=5")},_initItems:function(){var r=this,a=this.$wrapper.width(),o=this.$wrapper.height(),t=this.$items.eq(this.current).addClass("st-center").show(),h=this.options.piles?Math.max(this.$lPile.height(),this.$rPile.height())/2:0;this.$title.html(t.data("title")),this.$items.each(function(t){var i=u(this),s=i.height(),e=i.width(),n=o-r.radius-s/2;i.index()!==r.current&&i.addClass("st-right"),r.support&&i.css({transition:r.transformName+" "+r.options.speed+"ms "+r.options.easing+", opacity "+r.options.speed+"ms "+r.options.easing,transformOrigin:"50% "+(r.radius+s/2-h)+"px"}),i.css({left:a/2-e/2,top:n})})}};var n=function(t){i.console&&i.console.error(t)};u.fn.stackslider=function(t){var i=u.data(this,"stackslider");if("string"==typeof t){var s=Array.prototype.slice.call(arguments,1);this.each(function(){i?u.isFunction(i[t])&&"_"!==t.charAt(0)?i[t].apply(i,s):n("no such method '"+t+"' for stackslider instance"):n("cannot call methods on stackslider prior to initialization; attempted to call method '"+t+"'")})}else this.each(function(){i?i._init():i=u.data(this,"stackslider",new u.StackSlider(t,this))});return i}}(jQuery,window);